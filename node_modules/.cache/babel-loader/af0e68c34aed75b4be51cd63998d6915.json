{"ast":null,"code":"\"use strict\"; // Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nclass BaseConnectionHealthPolicy {\n  constructor(configuration, data) {\n    this.minHealth = configuration.minHealth;\n    this.maxHealth = configuration.maxHealth;\n    this.currentHealth = configuration.initialHealth;\n    this.currentData = data.clone();\n  }\n\n  minimumHealth() {\n    return this.minHealth;\n  }\n\n  maximumHealth() {\n    return this.maxHealth;\n  }\n\n  health() {\n    return this.maximumHealth();\n  }\n\n  update(connectionHealthData) {\n    this.currentData = connectionHealthData;\n  }\n\n  getConnectionHealthData() {\n    return this.currentData.clone();\n  }\n\n  healthy() {\n    return this.health() > this.minimumHealth();\n  }\n\n  healthIfChanged() {\n    const newHealth = this.health();\n\n    if (newHealth !== this.currentHealth) {\n      this.currentHealth = newHealth;\n      return newHealth;\n    }\n\n    return null;\n  }\n\n}\n\nexports.default = BaseConnectionHealthPolicy;","map":{"version":3,"mappings":"cAAA;AACA;;;;;;AAMA,MAAqBA,0BAArB,CAA+C;EAM7CC,YAAYC,aAAZ,EAAgEC,IAAhE,EAA0F;IACxF,KAAKC,SAAL,GAAiBF,aAAa,CAACE,SAA/B;IACA,KAAKC,SAAL,GAAiBH,aAAa,CAACG,SAA/B;IACA,KAAKC,aAAL,GAAqBJ,aAAa,CAACK,aAAnC;IACA,KAAKC,WAAL,GAAmBL,IAAI,CAACM,KAAL,EAAnB;EACD;;EAEDC,aAAa;IACX,OAAO,KAAKN,SAAZ;EACD;;EAEDO,aAAa;IACX,OAAO,KAAKN,SAAZ;EACD;;EAEDO,MAAM;IACJ,OAAO,KAAKD,aAAL,EAAP;EACD;;EAEDE,MAAM,CAACC,oBAAD,EAA2C;IAC/C,KAAKN,WAAL,GAAmBM,oBAAnB;EACD;;EAEDC,uBAAuB;IACrB,OAAO,KAAKP,WAAL,CAAiBC,KAAjB,EAAP;EACD;;EAEDO,OAAO;IACL,OAAO,KAAKJ,MAAL,KAAgB,KAAKF,aAAL,EAAvB;EACD;;EAEDO,eAAe;IACb,MAAMC,SAAS,GAAG,KAAKN,MAAL,EAAlB;;IACA,IAAIM,SAAS,KAAK,KAAKZ,aAAvB,EAAsC;MACpC,KAAKA,aAAL,GAAqBY,SAArB;MACA,OAAOA,SAAP;IACD;;IACD,OAAO,IAAP;EACD;;AA5C4C;;AAA/CC","names":["BaseConnectionHealthPolicy","constructor","configuration","data","minHealth","maxHealth","currentHealth","initialHealth","currentData","clone","minimumHealth","maximumHealth","health","update","connectionHealthData","getConnectionHealthData","healthy","healthIfChanged","newHealth","exports"],"sourceRoot":"","sources":["../../src/connectionhealthpolicy/BaseConnectionHealthPolicy.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}