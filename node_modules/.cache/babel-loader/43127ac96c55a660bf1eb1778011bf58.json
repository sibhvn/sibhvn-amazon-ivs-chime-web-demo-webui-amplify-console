{"ast":null,"code":"\"use strict\"; // Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\n * A builder class to instantiate a model spec.\n */\n\nclass ModelSpecBuilder {\n  constructor() {\n    this.path = null;\n    this.input = null;\n    this.output = null;\n  }\n\n  static builder() {\n    return new ModelSpecBuilder();\n  }\n  /**\n   * Set up the builder to use the default model implementation.\n   *\n   * Members of this interface can change without a major version bump to accommodate new browser\n   * bugs and capabilities. If you extend this type, you might need to rework your code for new minor\n   * versions of this library.\n   * @returns a reference to the current builder.\n   */\n\n\n  withDefaultModel() {\n    return this.withSelfieSegmentationDefaults();\n  }\n  /**\n   * Set up the builder to use the defaults for selfie segmentation model.\n   * @returns the builder to allow for fluent API (e.g., ModelSpecBuilder.withSelfieSegmentationDefaults().build()).\n   */\n\n\n  withSelfieSegmentationDefaults() {\n    const SELFIE_MODEL_INPUT_SHAPE = {\n      height: 144,\n      width: 256,\n      range: [0, 1],\n      channels: 3\n    };\n    const SELFIE_MODEL_OUTPUT_SHAPE = {\n      height: 144,\n      width: 256,\n      range: [0, 1],\n      channels: 1\n    };\n    const DEFAULT_SELFIE_MODEL_PATH = 'https://static.sdkassets.chime.aws/bgblur/models/selfie_segmentation_landscape.tflite';\n    this.path = DEFAULT_SELFIE_MODEL_PATH;\n    this.input = SELFIE_MODEL_INPUT_SHAPE;\n    this.output = SELFIE_MODEL_OUTPUT_SHAPE;\n    return this;\n  }\n  /**\n   * A method to override the path to the segmentation model.\n   * @param path A function that returns the path to the segmentation model.\n   * @returns the builder to allow for fluent API (e.g., ModelSpecBuilder.builder().withPath(\"some path\").build()).\n   */\n\n\n  withPath(path) {\n    this.path = path;\n    return this;\n  }\n  /**\n   * A method to override the input shape to the segmentation model.\n   * @param input An object that defines input shape of the segmentation model.\n   * @returns the builder to allow for fluent API (e.g., ModelSpecBuilder.builder().withInput({}).build()).\n   */\n\n\n  withInput(input) {\n    this.input = input;\n    return this;\n  }\n  /**\n   * A method to override the output shape to the segmentation model.\n   * @param input An object that defines input shape of the segmentation model.\n   * @returns the builder to allow for fluent API (e.g., ModelSpecBuilder.builder().withOutput({}).build()).\n   */\n\n\n  withOutput(output) {\n    this.output = output;\n    return this;\n  }\n  /**\n   * Validate that inputs to the model spec are valid.\n   */\n\n\n  validate() {\n    if (!this.path) {\n      throw new Error('model spec path is not set');\n    }\n\n    if (!this.input) {\n      throw new Error('model spec input is not set');\n    }\n\n    if (!this.output) {\n      throw new Error('model spec output is not set');\n    }\n  }\n  /**\n   * A method that returns an instantiated object that implements the ModelSpec interface with values set for\n   * the use of the selfie segmentation model.\n   * @returns an object that implements the ModelSpec interface.\n   */\n\n\n  build() {\n    this.validate();\n    return {\n      path: this.path,\n      input: this.input,\n      output: this.output\n    };\n  }\n\n}\n\nexports.default = ModelSpecBuilder;","map":{"version":3,"mappings":"cAAA;AACA;;;;;AAKA;;;;AAGA,MAAqBA,gBAArB,CAAqC;EAArCC;IACU,YAAe,IAAf;IACA,aAAoB,IAApB;IACA,cAAqB,IAArB;EAyGT;;EAxGe,OAAPC,OAAO;IACZ,OAAO,IAAIF,gBAAJ,EAAP;EACD;EAED;;;;;;;;;;EAQAG,gBAAgB;IACd,OAAO,KAAKC,8BAAL,EAAP;EACD;EAED;;;;;;EAIAA,8BAA8B;IAC5B,MAAMC,wBAAwB,GAAe;MAC3CC,MAAM,EAAE,GADmC;MAE3CC,KAAK,EAAE,GAFoC;MAG3CC,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ,CAHoC;MAI3CC,QAAQ,EAAE;IAJiC,CAA7C;IAOA,MAAMC,yBAAyB,GAAe;MAC5CJ,MAAM,EAAE,GADoC;MAE5CC,KAAK,EAAE,GAFqC;MAG5CC,KAAK,EAAE,CAAC,CAAD,EAAI,CAAJ,CAHqC;MAI5CC,QAAQ,EAAE;IAJkC,CAA9C;IAOA,MAAME,yBAAyB,GAC7B,uFADF;IAGA,KAAKC,IAAL,GAAYD,yBAAZ;IACA,KAAKE,KAAL,GAAaR,wBAAb;IACA,KAAKS,MAAL,GAAcJ,yBAAd;IACA,OAAO,IAAP;EACD;EAED;;;;;;;EAKAK,QAAQ,CAACH,IAAD,EAAa;IACnB,KAAKA,IAAL,GAAYA,IAAZ;IACA,OAAO,IAAP;EACD;EAED;;;;;;;EAKAI,SAAS,CAACH,KAAD,EAAkB;IACzB,KAAKA,KAAL,GAAaA,KAAb;IACA,OAAO,IAAP;EACD;EAED;;;;;;;EAKAI,UAAU,CAACH,MAAD,EAAmB;IAC3B,KAAKA,MAAL,GAAcA,MAAd;IACA,OAAO,IAAP;EACD;EAED;;;;;EAGQI,QAAQ;IACd,IAAI,CAAC,KAAKN,IAAV,EAAgB;MACd,MAAM,IAAIO,KAAJ,CAAU,4BAAV,CAAN;IACD;;IAED,IAAI,CAAC,KAAKN,KAAV,EAAiB;MACf,MAAM,IAAIM,KAAJ,CAAU,6BAAV,CAAN;IACD;;IAED,IAAI,CAAC,KAAKL,MAAV,EAAkB;MAChB,MAAM,IAAIK,KAAJ,CAAU,8BAAV,CAAN;IACD;EACF;EAED;;;;;;;EAKAC,KAAK;IACH,KAAKF,QAAL;IACA,OAAO;MACLN,IAAI,EAAE,KAAKA,IADN;MAELC,KAAK,EAAE,KAAKA,KAFP;MAGLC,MAAM,EAAE,KAAKA;IAHR,CAAP;EAKD;;AA3GkC;;AAArCO","names":["ModelSpecBuilder","constructor","builder","withDefaultModel","withSelfieSegmentationDefaults","SELFIE_MODEL_INPUT_SHAPE","height","width","range","channels","SELFIE_MODEL_OUTPUT_SHAPE","DEFAULT_SELFIE_MODEL_PATH","path","input","output","withPath","withInput","withOutput","validate","Error","build","exports"],"sourceRoot":"","sources":["../../src/backgroundblurprocessor/ModelSpecBuilder.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}