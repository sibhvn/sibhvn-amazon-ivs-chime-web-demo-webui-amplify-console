{"ast":null,"code":"var _jsxFileName = \"/Users/kshiba01/projects/DX\\u30B5\\u30FC\\u30D2\\u3099\\u30B9/AWS/amplify/amazon-ivs-chime-web-demo-webui-amplify-console/src/components/chimeWeb/Welcome.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport * as config from '../../config';\nimport Error from './Error';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Welcome = _ref => {\n  _s();\n\n  let {\n    location,\n    history\n  } = _ref;\n  const [username, setUsername] = useState('');\n  const [title, setTitle] = useState('');\n  const [playbackURL, setPlaybackURL] = useState(config.DEFAULT_VIDEO_STREAM);\n  const [errorMsg, setErrorMsg] = useState('');\n  const [showError, setShowError] = useState(false);\n  const baseHref = config.BASE_HREF;\n  const inputRef = /*#__PURE__*/createRef();\n  useEffect(() => {\n    const qs = new URLSearchParams(location.search);\n    const action = qs.get('action');\n\n    if (action === 'join') {\n      const title = qs.get('room');\n      history.push(`${baseHref}/join?room=${title}`);\n    }\n\n    inputRef.current.focus();\n  }, []);\n\n  const handleNameChange = e => {\n    setUsername(e.target.value);\n  };\n\n  const handleRoomChange = e => {\n    setTitle(e.target.value);\n  };\n\n  const handlePlaybackURLChange = e => {\n    setPlaybackURL(e.target.value);\n  };\n\n  const handleCreateRoom = e => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    try {\n      createRoom();\n    } catch (error) {\n      handleErrorMsg(errorMsg);\n    }\n  };\n\n  const handleErrorMsg = errorMsg => {\n    setErrorMsg(errorMsg);\n    setShowError(true);\n  };\n\n  const createRoom = async () => {\n    const data = {\n      username,\n      title,\n      playbackURL,\n      role: 'host'\n    };\n    sessionStorage.setItem(`chime[${title}]`, JSON.stringify(data));\n    history.push(`${baseHref}/meeting?room=${title}`);\n  };\n\n  const createRoomDisabled = !username || !title || !playbackURL;\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"welcome form-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome__intro\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"intro__inner formatted-text\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Amazon IVS with ChimeSDK\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Create or join rooms, and watch Amazon IVS streams with anyone.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"welcome__content pd-4\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"content__inner\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"mg-b-2\",\n            children: \"Get started\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            action: \"\",\n            children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n              className: \"mg-b-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"mg-b-2\",\n                type: \"text\",\n                placeholder: \"Your name\",\n                value: username,\n                ref: inputRef,\n                onChange: handleNameChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Room name\",\n                value: title,\n                onChange: handleRoomChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                placeholder: \"Playback URL\",\n                value: playbackURL,\n                onChange: handlePlaybackURLChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"mg-t-2 btn btn--primary\",\n                disabled: createRoomDisabled,\n                onClick: handleCreateRoom,\n                children: \"Create room\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), showError && /*#__PURE__*/_jsxDEV(Error, {\n      closeError: () => showError(false),\n      errorMsg: errorMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Welcome, \"fK7wr9LjWbWKh1/1czdXA5xhEUE=\");\n\n_c = Welcome;\nWelcome.propTypes = {\n  history: PropTypes.object,\n  location: PropTypes.object\n};\nexport default _c2 = withRouter(Welcome);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Welcome\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","useState","useEffect","createRef","PropTypes","withRouter","config","Error","Welcome","location","history","username","setUsername","title","setTitle","playbackURL","setPlaybackURL","DEFAULT_VIDEO_STREAM","errorMsg","setErrorMsg","showError","setShowError","baseHref","BASE_HREF","inputRef","qs","URLSearchParams","search","action","get","push","current","focus","handleNameChange","e","target","value","handleRoomChange","handlePlaybackURLChange","handleCreateRoom","preventDefault","stopPropagation","createRoom","error","handleErrorMsg","data","role","sessionStorage","setItem","JSON","stringify","createRoomDisabled","propTypes","object"],"sources":["/Users/kshiba01/projects/DXサービス/AWS/amplify/amazon-ivs-chime-web-demo-webui-amplify-console/src/components/chimeWeb/Welcome.jsx"],"sourcesContent":["import React, { useState, useEffect, createRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport * as config from '../../config';\nimport Error from './Error';\n\nconst Welcome = ({ location, history }) => {\n  const [username, setUsername] = useState('');\n  const [title, setTitle] = useState('');\n  const [playbackURL, setPlaybackURL] = useState(config.DEFAULT_VIDEO_STREAM);\n  const [errorMsg, setErrorMsg] = useState('');\n  const [showError, setShowError] = useState(false);\n\n  const baseHref = config.BASE_HREF;\n  const inputRef = createRef();\n\n  useEffect(() => {\n    const qs = new URLSearchParams(location.search);\n    const action = qs.get('action');\n    if (action === 'join') {\n      const title = qs.get('room');\n      history.push(`${baseHref}/join?room=${title}`);\n    }\n    inputRef.current.focus();\n  }, []);\n\n  const handleNameChange = (e) => {\n    setUsername(e.target.value);\n  };\n\n  const handleRoomChange = (e) => {\n    setTitle(e.target.value);\n  };\n\n  const handlePlaybackURLChange = (e) => {\n    setPlaybackURL(e.target.value);\n  };\n\n  const handleCreateRoom = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    try {\n      createRoom();\n    } catch (error) {\n      handleErrorMsg(errorMsg);\n    }\n  };\n\n  const handleErrorMsg = (errorMsg) => {\n    setErrorMsg(errorMsg);\n    setShowError(true);\n  };\n\n  const createRoom = async () => {\n    const data = {\n      username,\n      title,\n      playbackURL,\n      role: 'host',\n    };\n    sessionStorage.setItem(`chime[${title}]`, JSON.stringify(data));\n    history.push(`${baseHref}/meeting?room=${title}`);\n  };\n\n  const createRoomDisabled = !username || !title || !playbackURL;\n  return (\n    <React.Fragment>\n      <div className=\"welcome form-grid\">\n        <div className=\"welcome__intro\">\n          <div className=\"intro__inner formatted-text\">\n            <h1>Amazon IVS with ChimeSDK</h1>\n            <h3>\n              Create or join rooms, and watch Amazon IVS streams with anyone.\n            </h3>\n          </div>\n        </div>\n\n        <div className=\"welcome__content pd-4\">\n          <div className=\"content__inner\">\n            <h2 className=\"mg-b-2\">Get started</h2>\n            <form action=\"\">\n              <fieldset className=\"mg-b-2\">\n                <input\n                  className=\"mg-b-2\"\n                  type=\"text\"\n                  placeholder=\"Your name\"\n                  value={username}\n                  ref={inputRef}\n                  onChange={handleNameChange}\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Room name\"\n                  value={title}\n                  onChange={handleRoomChange}\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Playback URL\"\n                  value={playbackURL}\n                  onChange={handlePlaybackURLChange}\n                />\n                <button\n                  className=\"mg-t-2 btn btn--primary\"\n                  disabled={createRoomDisabled}\n                  onClick={handleCreateRoom}\n                >\n                  Create room\n                </button>\n              </fieldset>\n            </form>\n          </div>\n        </div>\n      </div>\n      {showError && (\n        <Error closeError={() => showError(false)} errorMsg={errorMsg} />\n      )}\n    </React.Fragment>\n  );\n};\n\nWelcome.propTypes = {\n  history: PropTypes.object,\n  location: PropTypes.object,\n};\n\nexport default withRouter(Welcome);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}