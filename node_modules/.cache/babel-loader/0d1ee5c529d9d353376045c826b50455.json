{"ast":null,"code":"var _jsxFileName = \"/Users/kshiba01/projects/DX\\u30B5\\u30FC\\u30D2\\u3099\\u30B9/AWS/amplify/amazon-ivs-chime-web-demo/web-ui/src/components/chat/Chat.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { createRef, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport * as config from '../../config'; // Styles\n\nimport './Chat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Chat = props => {\n  _s();\n\n  const [message, setMesssage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [connection, setConnection] = useState(null);\n  const [showPopup, setShowPopup] = useState(false);\n  const chatRef = /*#__PURE__*/createRef();\n  const messagesEndRef = /*#__PURE__*/createRef();\n  useEffect(() => {\n    const initChatConnection = async () => {\n      const {\n        Meeting,\n        Attendee\n      } = props.joinInfo;\n      const messagingUrl = `${config.CHAT_WEBSOCKET}?MeetingId=${Meeting.MeetingId}&AttendeeId=${Attendee.AttendeeId}&JoinToken=${Attendee.JoinToken}`;\n      const connectionInit = await new WebSocket(messagingUrl);\n      if (config.DEBUG) console.log(connectionInit);\n\n      connectionInit.onopen = event => {\n        console.log('websocket is now open', event);\n      };\n\n      connectionInit.addEventListener('message', event => {\n        const data = event.data.split('::');\n        const username = data[0];\n        const newMessage = data.slice(1).join('::'); // in case the message contains the separator '::'\n\n        setMessages(prevState => {\n          return [...prevState, {\n            timestamp: Date.now(),\n            username,\n            message: newMessage\n          }];\n        });\n      });\n      setConnection(connectionInit);\n      return () => {\n        connectionInit.removeEventListener('message', () => {\n          console.log('Message event cancelled');\n        });\n      };\n    };\n\n    initChatConnection();\n  }, []);\n  useEffect(() => {\n    const scrollToBottom = () => {\n      messagesEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    };\n\n    scrollToBottom();\n  });\n\n  const handleChange = e => {\n    setMesssage(e.target.value);\n  };\n\n  const handleKeyDown = e => {\n    if (e.keyCode === 13) {\n      // keyCode 13 is carriage return\n      const {\n        username\n      } = props;\n\n      if (message) {\n        const data = `{\n          \"message\": \"sendmessage\",\n          \"data\": \"${username}::${message.replace(/\\\\/g, '\\\\\\\\').replace(/\"/g, '\\\\\"')}\"\n        }`;\n        connection.send(data);\n        setMesssage('');\n      }\n    }\n  };\n\n  const handleRoomClick = e => {\n    e.stopPropagation();\n    e.preventDefault();\n    const {\n      title\n    } = props;\n    const link = `${window.location.origin}${window.location.pathname.replace('meeting', 'index.html')}?action=join&room=${title}`;\n    if (config.DEBUG) console.log(link);\n    copyTextToClipboard(encodeURI(link));\n  };\n\n  const handleShowPopup = () => {\n    // show popup message\n    setShowPopup(true); // hide popup message after 2 seconds\n\n    setTimeout(() => {\n      setShowPopup(false);\n    }, 2000);\n  };\n\n  const copyTextToClipboard = text => {\n    if (navigator.clipboard) {\n      navigator.clipboard.writeText(text).then(() => {\n        handleShowPopup();\n        if (config.DEBUG) console.log('Room link copied to clipboard');\n      }, err => {\n        if (config.DEBUG) console.log('Could not copy text: ', err);\n      });\n    }\n  };\n\n  const parseUrls = userInput => {\n    var urlRegExp = /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_.~#?&//=]*)/g;\n    let formattedMessage = userInput.replace(urlRegExp, match => {\n      let formattedMatch = match;\n\n      if (!match.startsWith('http')) {\n        formattedMatch = `http://${match}`;\n      }\n\n      return `<a href=${formattedMatch} class=\"chat-line__link\" target=\"_blank\" rel=\"noopener noreferrer\">${match}</a>`;\n    });\n    return formattedMessage;\n  };\n\n  const popup = showPopup ? 'show' : '';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat full-height pos-relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat__room-link full-width\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"room-link popup\",\n        onClick: handleRoomClick,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"room-link__label\",\n          children: props.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"room-link__svg\",\n          width: \"20\",\n          height: \"20\",\n          viewBox: \"0 0 20 20\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M3.25033 9.99999C3.25033 8.57499 4.40866 7.41666 5.83366 7.41666H9.16699V5.83333H5.83366C3.53366 5.83333 1.66699 7.69999 1.66699 9.99999C1.66699 12.3 3.53366 14.1667 5.83366 14.1667H9.16699V12.5833H5.83366C4.40866 12.5833 3.25033 11.425 3.25033 9.99999ZM6.66699 10.8333H13.3337V9.16666H6.66699V10.8333ZM14.167 5.83333H10.8337V7.41666H14.167C15.592 7.41666 16.7503 8.57499 16.7503 9.99999C16.7503 11.425 15.592 12.5833 14.167 12.5833H10.8337V14.1667H14.167C16.467 14.1667 18.3337 12.3 18.3337 9.99999C18.3337 7.69999 16.467 5.83333 14.167 5.83333Z\",\n            fill: \"white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: `popuptext ${popup}`,\n          id: \"myPopup\",\n          children: \"Room link copied to clipboard\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat__wrapper full-width pos-relative\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages pd-x-1 pos-absolute\",\n        children: [messages.map(msg => {\n          let formattedMessage = parseUrls(msg.message);\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-line\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"username\",\n                children: msg.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                dangerouslySetInnerHTML: {\n                  __html: formattedMessage\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 17\n            }, this)\n          }, msg.timestamp, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"composer chime-web-composer full-width\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        ref: chatRef,\n        type: \"text\",\n        placeholder: \"Say something\",\n        value: message,\n        maxLength: 510,\n        onChange: handleChange,\n        onKeyDown: handleKeyDown\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Chat, \"NbzNSlAtlaVVNM+w4fG8FHzo9CI=\");\n\n_c = Chat;\nChat.propTypes = {\n  chime: PropTypes.object,\n  title: PropTypes.string,\n  username: PropTypes.string,\n  joinInfo: PropTypes.object\n};\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","createRef","useState","useEffect","PropTypes","config","Chat","props","message","setMesssage","messages","setMessages","connection","setConnection","showPopup","setShowPopup","chatRef","messagesEndRef","initChatConnection","Meeting","Attendee","joinInfo","messagingUrl","CHAT_WEBSOCKET","MeetingId","AttendeeId","JoinToken","connectionInit","WebSocket","DEBUG","console","log","onopen","event","addEventListener","data","split","username","newMessage","slice","join","prevState","timestamp","Date","now","removeEventListener","scrollToBottom","current","scrollIntoView","behavior","handleChange","e","target","value","handleKeyDown","keyCode","replace","send","handleRoomClick","stopPropagation","preventDefault","title","link","window","location","origin","pathname","copyTextToClipboard","encodeURI","handleShowPopup","setTimeout","text","navigator","clipboard","writeText","then","err","parseUrls","userInput","urlRegExp","formattedMessage","match","formattedMatch","startsWith","popup","map","msg","__html","propTypes","chime","object","string"],"sources":["/Users/kshiba01/projects/DXサービス/AWS/amplify/amazon-ivs-chime-web-demo/web-ui/src/components/chat/Chat.jsx"],"sourcesContent":["import React, { createRef, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport * as config from '../../config';\n\n// Styles\nimport './Chat.css';\n\nconst Chat = (props) => {\n  const [message, setMesssage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const [connection, setConnection] = useState(null);\n  const [showPopup, setShowPopup] = useState(false);\n\n  const chatRef = createRef();\n  const messagesEndRef = createRef();\n\n  useEffect(() => {\n    const initChatConnection = async () => {\n      const { Meeting, Attendee } = props.joinInfo;\n      const messagingUrl = `${config.CHAT_WEBSOCKET}?MeetingId=${Meeting.MeetingId}&AttendeeId=${Attendee.AttendeeId}&JoinToken=${Attendee.JoinToken}`;\n      const connectionInit = await new WebSocket(messagingUrl);\n\n      if (config.DEBUG) console.log(connectionInit);\n      connectionInit.onopen = (event) => {\n        console.log('websocket is now open', event);\n      };\n\n      connectionInit.addEventListener('message', (event) => {\n        const data = event.data.split('::');\n        const username = data[0];\n        const newMessage = data.slice(1).join('::'); // in case the message contains the separator '::'\n\n        setMessages((prevState) => {\n          return [\n            ...prevState,\n            {\n              timestamp: Date.now(),\n              username,\n              message: newMessage,\n            },\n          ];\n        });\n      });\n\n      setConnection(connectionInit);\n\n      return () => {\n        connectionInit.removeEventListener('message', () => {\n          console.log('Message event cancelled');\n        });\n      };\n    };\n\n    initChatConnection();\n  }, []);\n\n  useEffect(() => {\n    const scrollToBottom = () => {\n      messagesEndRef.current.scrollIntoView({ behavior: 'smooth' });\n    };\n    scrollToBottom();\n  });\n\n  const handleChange = (e) => {\n    setMesssage(e.target.value);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      // keyCode 13 is carriage return\n      const { username } = props;\n      if (message) {\n        const data = `{\n          \"message\": \"sendmessage\",\n          \"data\": \"${username}::${message\n          .replace(/\\\\/g, '\\\\\\\\')\n          .replace(/\"/g, '\\\\\"')}\"\n        }`;\n        connection.send(data);\n        setMesssage('');\n      }\n    }\n  };\n\n  const handleRoomClick = (e) => {\n    e.stopPropagation();\n    e.preventDefault();\n    const { title } = props;\n    const link = `${window.location.origin}${window.location.pathname.replace(\n      'meeting',\n      'index.html',\n    )}?action=join&room=${title}`;\n    if (config.DEBUG) console.log(link);\n    copyTextToClipboard(encodeURI(link));\n  };\n\n  const handleShowPopup = () => {\n    // show popup message\n    setShowPopup(true);\n    // hide popup message after 2 seconds\n    setTimeout(() => {\n      setShowPopup(false);\n    }, 2000);\n  };\n\n  const copyTextToClipboard = (text) => {\n    if (navigator.clipboard) {\n      navigator.clipboard.writeText(text).then(\n        () => {\n          handleShowPopup();\n          if (config.DEBUG) console.log('Room link copied to clipboard');\n        },\n        (err) => {\n          if (config.DEBUG) console.log('Could not copy text: ', err);\n        },\n      );\n    }\n  };\n\n  const parseUrls = (userInput) => {\n    var urlRegExp =\n      /(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_.~#?&//=]*)/g;\n    let formattedMessage = userInput.replace(urlRegExp, (match) => {\n      let formattedMatch = match;\n      if (!match.startsWith('http')) {\n        formattedMatch = `http://${match}`;\n      }\n      return `<a href=${formattedMatch} class=\"chat-line__link\" target=\"_blank\" rel=\"noopener noreferrer\">${match}</a>`;\n    });\n    return formattedMessage;\n  };\n\n  const popup = showPopup ? 'show' : '';\n  return (\n    <div className=\"chat full-height pos-relative\">\n      <div className=\"chat__room-link full-width\">\n        <button className=\"room-link popup\" onClick={handleRoomClick}>\n          <span className=\"room-link__label\">{props.title}</span>\n          <svg\n            className=\"room-link__svg\"\n            width=\"20\"\n            height=\"20\"\n            viewBox=\"0 0 20 20\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              d=\"M3.25033 9.99999C3.25033 8.57499 4.40866 7.41666 5.83366 7.41666H9.16699V5.83333H5.83366C3.53366 5.83333 1.66699 7.69999 1.66699 9.99999C1.66699 12.3 3.53366 14.1667 5.83366 14.1667H9.16699V12.5833H5.83366C4.40866 12.5833 3.25033 11.425 3.25033 9.99999ZM6.66699 10.8333H13.3337V9.16666H6.66699V10.8333ZM14.167 5.83333H10.8337V7.41666H14.167C15.592 7.41666 16.7503 8.57499 16.7503 9.99999C16.7503 11.425 15.592 12.5833 14.167 12.5833H10.8337V14.1667H14.167C16.467 14.1667 18.3337 12.3 18.3337 9.99999C18.3337 7.69999 16.467 5.83333 14.167 5.83333Z\"\n              fill=\"white\"\n            />\n          </svg>\n          <span className={`popuptext ${popup}`} id=\"myPopup\">\n            Room link copied to clipboard\n          </span>\n        </button>\n      </div>\n      <div className=\"chat__wrapper full-width pos-relative\">\n        <div className=\"messages pd-x-1 pos-absolute\">\n          {messages.map((msg) => {\n            let formattedMessage = parseUrls(msg.message);\n            return (\n              <div className=\"chat-line\" key={msg.timestamp}>\n                <p>\n                  <span className=\"username\">{msg.username}</span>\n                  <span\n                    dangerouslySetInnerHTML={{ __html: formattedMessage }}\n                  />\n                </p>\n              </div>\n            );\n          })}\n          <div ref={messagesEndRef} />\n        </div>\n      </div>\n      <div className=\"composer chime-web-composer full-width\">\n        <input\n          ref={chatRef}\n          type=\"text\"\n          placeholder=\"Say something\"\n          value={message}\n          maxLength={510}\n          onChange={handleChange}\n          onKeyDown={handleKeyDown}\n        />\n      </div>\n    </div>\n  );\n};\n\nChat.propTypes = {\n  chime: PropTypes.object,\n  title: PropTypes.string,\n  username: PropTypes.string,\n  joinInfo: PropTypes.object,\n};\n\nexport default Chat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}