{"ast":null,"code":"var _jsxFileName = \"/Users/kshiba01/projects/DX\\u30B5\\u30FC\\u30D2\\u3099\\u30B9/AWS/amplify/amazon-ivs-chime-web-demo-webui-amplify-console/src/components/chimeWeb/Join.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { createRef, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport * as config from '../../config';\nimport Error from './Error';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Join = props => {\n  _s();\n\n  const [username, setUsername] = useState('');\n  const [title, setTitle] = useState('');\n  const [errorMsg, setErrorMsg] = useState('');\n  const [showError, setShowError] = useState(false);\n  const inputRef = /*#__PURE__*/createRef();\n  const baseHref = config.BASE_HREF;\n  useEffect(() => {\n    const qs = new URLSearchParams(props.location.search);\n    const room = qs.get('room');\n    setTitle(room);\n  });\n\n  const joinRoom = async () => {\n    const data = {\n      username,\n      title,\n      role: 'attendee'\n    };\n    sessionStorage.setItem(`chime[${title}]`, JSON.stringify(data));\n    props.history.push(`${baseHref}/meeting?room=${title}`);\n  };\n\n  const handleNameChange = e => {\n    setUsername(e.target.value);\n  };\n\n  const handleJoinRoom = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    joinRoom();\n  };\n\n  const handleClick = e => {\n    let node = e.target;\n    let isModal = false;\n\n    while (node) {\n      if (node && node.classList && node.classList.contains('notice--error')) {\n        isModal = true;\n        break;\n      }\n\n      node = node.parentNode;\n    }\n\n    if (!isModal) {\n      closeError();\n    }\n  };\n\n  const closeError = () => {\n    setErrorMsg('Something went wrong');\n    setShowError(false);\n  };\n\n  const joinRoomDisabled = !username;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"welcome form-grid\",\n    onClick: handleClick,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"welcome__intro\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"intro__inner formatted-text\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Amazon IVS with ChimeSDK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Create or join rooms, and watch Amazon IVS streams with anyone.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"welcome__content pd-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"content__inner\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mg-b-2\",\n          children: \"Hey there!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          action: \"\",\n          children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n            className: \"mg-b-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Your name\",\n              value: username,\n              ref: inputRef,\n              onChange: handleNameChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"mg-t-1 btn btn--primary\",\n              disabled: joinRoomDisabled,\n              onClick: handleJoinRoom,\n              children: \"Join room\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), showError && /*#__PURE__*/_jsxDEV(Error, {\n      closeError: closeError,\n      errorMsg: errorMsg\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Join, \"A5ngrI8+krZQomeXeuPeN9oe9jc=\");\n\n_c = Join;\nJoin.propTypes = {\n  location: PropTypes.object,\n  history: PropTypes.object\n};\nexport default _c2 = withRouter(Join);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Join\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["React","createRef","useEffect","useState","PropTypes","withRouter","config","Error","Join","props","username","setUsername","title","setTitle","errorMsg","setErrorMsg","showError","setShowError","inputRef","baseHref","BASE_HREF","qs","URLSearchParams","location","search","room","get","joinRoom","data","role","sessionStorage","setItem","JSON","stringify","history","push","handleNameChange","e","target","value","handleJoinRoom","preventDefault","stopPropagation","handleClick","node","isModal","classList","contains","parentNode","closeError","joinRoomDisabled","propTypes","object"],"sources":["/Users/kshiba01/projects/DXサービス/AWS/amplify/amazon-ivs-chime-web-demo-webui-amplify-console/src/components/chimeWeb/Join.jsx"],"sourcesContent":["import React, { createRef, useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { withRouter } from 'react-router-dom';\nimport * as config from '../../config';\nimport Error from './Error';\n\nconst Join = (props) => {\n  const [username, setUsername] = useState('');\n  const [title, setTitle] = useState('');\n  const [errorMsg, setErrorMsg] = useState('');\n  const [showError, setShowError] = useState(false);\n\n  const inputRef = createRef();\n  const baseHref = config.BASE_HREF;\n\n  useEffect(() => {\n    const qs = new URLSearchParams(props.location.search);\n    const room = qs.get('room');\n    setTitle(room);\n  });\n\n  const joinRoom = async () => {\n    const data = {\n      username,\n      title,\n      role: 'attendee',\n    };\n\n    sessionStorage.setItem(`chime[${title}]`, JSON.stringify(data));\n    props.history.push(`${baseHref}/meeting?room=${title}`);\n  };\n\n  const handleNameChange = (e) => {\n    setUsername(e.target.value);\n  };\n\n  const handleJoinRoom = (e) => {\n    e.preventDefault();\n    e.stopPropagation();\n    joinRoom();\n  };\n\n  const handleClick = (e) => {\n    let node = e.target;\n    let isModal = false;\n    while (node) {\n      if (node && node.classList && node.classList.contains('notice--error')) {\n        isModal = true;\n        break;\n      }\n      node = node.parentNode;\n    }\n    if (!isModal) {\n      closeError();\n    }\n  };\n\n  const closeError = () => {\n    setErrorMsg('Something went wrong');\n    setShowError(false);\n  };\n\n  const joinRoomDisabled = !username;\n  return (\n    <div className=\"welcome form-grid\" onClick={handleClick}>\n      <div className=\"welcome__intro\">\n        <div className=\"intro__inner formatted-text\">\n          <h1>Amazon IVS with ChimeSDK</h1>\n          <h3>\n            Create or join rooms, and watch Amazon IVS streams with anyone.\n          </h3>\n        </div>\n      </div>\n\n      <div className=\"welcome__content pd-4\">\n        <div className=\"content__inner\">\n          <h2 className=\"mg-b-2\">Hey there!</h2>\n          <form action=\"\">\n            <fieldset className=\"mg-b-2\">\n              <input\n                type=\"text\"\n                placeholder=\"Your name\"\n                value={username}\n                ref={inputRef}\n                onChange={handleNameChange}\n              />\n              <button\n                className=\"mg-t-1 btn btn--primary\"\n                disabled={joinRoomDisabled}\n                onClick={handleJoinRoom}\n              >\n                Join room\n              </button>\n            </fieldset>\n          </form>\n        </div>\n      </div>\n\n      {showError && <Error closeError={closeError} errorMsg={errorMsg} />}\n    </div>\n  );\n};\n\nJoin.propTypes = {\n  location: PropTypes.object,\n  history: PropTypes.object,\n};\n\nexport default withRouter(Join);\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}